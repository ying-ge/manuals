name: Test Manual Trigger

on:
  workflow_dispatch:
    inputs:
      message:
        description: 'Test message to display'
        required: false
        default: 'Hello GitHub Actions!'
        type: string

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Print test message
        run: |
          echo "ğŸ§ª Manual trigger test successful!"
          echo "ğŸ“ Message: ${{ github.event.inputs.message || 'No message provided' }}"
          echo "ğŸ”‘ Testing environment variables..."
          echo "GLM_API_KEY present: ${{ secrets.GLM_API_KEY != '' }}"
          echo "GLM_MODEL_NAME: ${{ secrets.GLM_MODEL_NAME || 'glm-4.6' }}"

      - name: Test GLM API (if API key is available)
        if: secrets.GLM_API_KEY != ''
        env:
          GLM_API_KEY: ${{ secrets.GLM_API_KEY }}
          GLM_BASE_URL: ${{ secrets.GLM_BASE_URL || 'https://open.bigmodel.cn/api/paas/v4' }}
          GLM_MODEL_NAME: ${{ secrets.GLM_MODEL_NAME || 'glm-4.6' }}
        run: |
          python test_github_actions.py